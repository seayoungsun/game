# ğŸ® æ¸¸æˆå¹³å°é¡¹ç›®

ä¸€ä¸ªåŸºäº Go è¯­è¨€å¼€å‘çš„åˆ†å¸ƒå¼åœ¨çº¿æ£‹ç‰Œæ¸¸æˆå¹³å°ï¼Œæ”¯æŒå¤šå®ä¾‹éƒ¨ç½²ã€å®æ—¶é€šä¿¡ã€æ”¯ä»˜ç³»ç»Ÿå’Œç®¡ç†åå°ã€‚

## âœ¨ æ ¸å¿ƒç‰¹æ€§

- ğŸ¯ **å¤šæ¸¸æˆæ”¯æŒ**ï¼šè·‘å¾—å¿«ã€ç‰›ç‰›ç­‰å¤šç§æ£‹ç‰Œæ¸¸æˆ
- ğŸ” **ç”¨æˆ·ç³»ç»Ÿ**ï¼šJWT è®¤è¯ã€ç”¨æˆ·æ³¨å†Œ/ç™»å½•ã€ä¸ªäººèµ„æ–™ç®¡ç†
- ğŸ  **æˆ¿é—´ç³»ç»Ÿ**ï¼šåˆ›å»º/åŠ å…¥/ç¦»å¼€æˆ¿é—´ã€æˆ¿é—´å¯†ç ä¿æŠ¤ã€æˆ¿é—´åˆ—è¡¨
- ğŸ’¬ **å®æ—¶é€šä¿¡**ï¼šåŸºäº WebSocket çš„å®æ—¶æ¶ˆæ¯æ¨é€å’Œæ¸¸æˆçŠ¶æ€åŒæ­¥
- ğŸ’° **æ”¯ä»˜ç³»ç»Ÿ**ï¼šUSDTï¼ˆERC20ï¼‰å……å€¼/æç°ã€HD é’±åŒ…åœ°å€æ´¾ç”Ÿ
- ğŸ“Š **ç®¡ç†åå°**ï¼šç”¨æˆ·ç®¡ç†ã€è®¢å•ç®¡ç†ã€ç³»ç»Ÿé…ç½®ã€æ“ä½œæ—¥å¿—ã€RBAC æƒé™æ§åˆ¶
- ğŸš€ **åˆ†å¸ƒå¼æ¶æ„**ï¼šæ”¯æŒ Consul æœåŠ¡å‘ç°ã€Kafka æ¶ˆæ¯é˜Ÿåˆ—ã€å¤šå®ä¾‹éƒ¨ç½²
- ğŸ“ˆ **ç›‘æ§ä¸æ—¥å¿—**ï¼šé›†æˆ Elasticsearchã€æ—¥å¿—è½®è½¬ã€æ€§èƒ½æŒ‡æ ‡æ”¶é›†
- ğŸ”’ **å¹¶å‘æ§åˆ¶**ï¼šåˆ†å¸ƒå¼é”ï¼ˆRedisï¼‰ã€æœ¬åœ°è¯»å†™é”ã€Worker Pool

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

### åç«¯
- **è¯­è¨€**ï¼šGo 1.21+
- **Web æ¡†æ¶**ï¼šGin
- **WebSocket**ï¼šGorilla WebSocket
- **æ•°æ®åº“**ï¼šMySQL 5.7+/8.0+ï¼ˆGORMï¼‰
- **ç¼“å­˜**ï¼šRedis 7.0+
- **æœç´¢å¼•æ“**ï¼šElasticsearch
- **æ¶ˆæ¯é˜Ÿåˆ—**ï¼šKafkaï¼ˆIBM Saramaï¼‰
- **æœåŠ¡å‘ç°**ï¼šConsul / Redis
- **æ—¥å¿—**ï¼šZap + Lumberjack

### å‰ç«¯
- **ç®¡ç†åå°**ï¼šVue 3 + Vite
- **ç”¨æˆ·ç«¯**ï¼šåŸç”Ÿ HTML/CSS/JavaScript

### åŸºç¡€è®¾æ–½
- **å®¹å™¨åŒ–**ï¼šDocker & Docker Compose
- **éƒ¨ç½²**ï¼šæ”¯æŒäºŒè¿›åˆ¶éƒ¨ç½²å’Œå®¹å™¨éƒ¨ç½²

## ğŸ—ï¸ æ¶æ„æ¦‚è§ˆ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     å®¢æˆ·ç«¯å±‚                             â”‚
â”‚  Web å®¢æˆ·ç«¯ / ç§»åŠ¨å®¢æˆ·ç«¯ / ç®¡ç†åå°å‰ç«¯                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  Nginx è´Ÿè½½å‡è¡¡å±‚                        â”‚
â”‚  API Upstream / WebSocket Upstream / Admin Upstream     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    åº”ç”¨æœåŠ¡å±‚                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚  â”‚ API      â”‚  â”‚ Game     â”‚  â”‚ Admin    â”‚             â”‚
â”‚  â”‚ Server   â”‚  â”‚ Server   â”‚  â”‚ Server   â”‚             â”‚
â”‚  â”‚ :8080    â”‚  â”‚ :8081    â”‚  â”‚ :8082    â”‚             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              æœåŠ¡å‘ç°ä¸æ¶ˆæ¯é˜Ÿåˆ—                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                           â”‚
â”‚  â”‚ Consul   â”‚  â”‚ Kafka    â”‚                           â”‚
â”‚  â”‚ (æœåŠ¡å‘ç°)â”‚  â”‚ (æ¶ˆæ¯é˜Ÿåˆ—)â”‚                           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    æ•°æ®å­˜å‚¨å±‚                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚  â”‚ MySQL    â”‚  â”‚ Redis    â”‚  â”‚ Elastic  â”‚             â”‚
â”‚  â”‚ (ä¸»æ•°æ®) â”‚  â”‚ (ç¼“å­˜)   â”‚  â”‚ (æœç´¢)   â”‚             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- Go 1.21+
- MySQL 5.7+/8.0+
- Redis 7.0+
- Elasticsearchï¼ˆå¯é€‰ï¼‰
- Node.js 18+ï¼ˆä»…ç®¡ç†åå°å‰ç«¯ï¼‰
- Kafkaï¼ˆåˆ†å¸ƒå¼éƒ¨ç½²æ—¶ï¼‰
- Consulï¼ˆåˆ†å¸ƒå¼éƒ¨ç½²æ—¶ï¼‰

### 1. å…‹éš†é¡¹ç›®

```bash
git clone https://github.com/kaifa/game-platform.git
cd game-platform
```

### 2. é…ç½®ç¯å¢ƒ

```bash
# å¤åˆ¶é…ç½®æ–‡ä»¶æ¨¡æ¿
cp configs/config.local.yaml.example configs/config.local.yaml

# ç¼–è¾‘é…ç½®æ–‡ä»¶ï¼Œä¿®æ”¹æ•°æ®åº“ã€Redis ç­‰è¿æ¥ä¿¡æ¯
vim configs/config.local.yaml
```

### 3. åˆå§‹åŒ–æ•°æ®åº“

```bash
# åˆ›å»ºæ•°æ®åº“
mysql -u root -p -e 'CREATE DATABASE game_platform CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;'

# æ‰§è¡Œæ•°æ®åº“è¿ç§»
make migrate
```

### 4. å¯åŠ¨ä¾èµ–æœåŠ¡ï¼ˆDockerï¼‰

```bash
cd docker
docker-compose up -d
```

è¿™å°†å¯åŠ¨ï¼š
- MySQLï¼ˆç«¯å£ 3306ï¼‰
- Redisï¼ˆç«¯å£ 6379ï¼‰
- Elasticsearchï¼ˆç«¯å£ 9200ï¼‰
- Kibanaï¼ˆç«¯å£ 5601ï¼‰

### 5. å¯åŠ¨åº”ç”¨æœåŠ¡

```bash
# ç»ˆç«¯1ï¼šå¯åŠ¨ API æœåŠ¡ï¼ˆç«¯å£ 8080ï¼‰
make run-api

# ç»ˆç«¯2ï¼šå¯åŠ¨æ¸¸æˆæœåŠ¡å™¨ï¼ˆç«¯å£ 8081ï¼ŒWebSocketï¼‰
make run-game

# ç»ˆç«¯3ï¼ˆå¯é€‰ï¼‰ï¼šå¯åŠ¨ç®¡ç†åå° APIï¼ˆç«¯å£ 8082ï¼‰
make run-admin
```

### 6. å¯åŠ¨ç®¡ç†åå°å‰ç«¯ï¼ˆå¯é€‰ï¼‰

```bash
cd admin-vue
npm install
npm run dev  # é»˜è®¤ http://localhost:3000
```

### 7. è®¿é—®åº”ç”¨

- **ç”¨æˆ·ç«¯**ï¼š`http://localhost:8080`
- **API æ–‡æ¡£**ï¼š`http://localhost:8080/api/v1`
- **ç®¡ç†åå°**ï¼š`http://localhost:3000`ï¼ˆå¦‚æœå¯åŠ¨äº†å‰ç«¯ï¼‰
- **WebSocket**ï¼š`ws://localhost:8081/ws?token=<token>`

## âš™ï¸ é…ç½®è¯´æ˜

### é…ç½®æ–‡ä»¶åŠ è½½é¡ºåº

1. å†…ç½®é»˜è®¤å€¼ï¼š`internal/config/config.go`
2. åŸºç¡€é…ç½®ï¼š`configs/config.yaml`
3. ç¯å¢ƒé…ç½®ï¼š`configs/config.<env>.yaml`ï¼ˆç”± `APP_ENV` æ§åˆ¶ï¼Œé»˜è®¤ `local`ï¼‰
4. ç¯å¢ƒå˜é‡è¦†ç›–ï¼ˆå¦‚ `REDIS_HOST`ã€`DATABASE_PASSWORD`ï¼‰

### ä¸»è¦é…ç½®é¡¹

```yaml
server:
  mode: debug              # debug, release, test
  port: 8080               # API æœåŠ¡ç«¯å£
  game_port: 8081          # æ¸¸æˆæœåŠ¡å™¨ç«¯å£
  admin_port: 8082         # ç®¡ç†åå°ç«¯å£
  machine_id: 0            # æœºå™¨IDï¼ˆ0-1023ï¼‰ï¼Œç”¨äºé›ªèŠ±ç®—æ³•

database:
  host: localhost
  port: 3306
  user: root
  password: your_password
  database: game_platform

redis:
  host: localhost
  port: 6379
  password: ""

# æœåŠ¡å‘ç°é…ç½®ï¼ˆåˆ†å¸ƒå¼éƒ¨ç½²ï¼‰
service_discovery:
  enabled: false
  type: "consul"           # consul æˆ– redis
  consul_addr: "localhost:8500"

# Kafka é…ç½®ï¼ˆåˆ†å¸ƒå¼éƒ¨ç½²ï¼‰
kafka:
  enabled: false
  brokers:
    - "localhost:9092"
  topic_prefix: "game"
  consumer_group: "game-server-group"
```

### ç¯å¢ƒå˜é‡

æ”¯æŒé€šè¿‡ç¯å¢ƒå˜é‡è¦†ç›–é…ç½®ï¼š

```bash
APP_ENV=prod \
DATABASE_PASSWORD=your_password \
REDIS_HOST=redis.example.com \
make run-api
```

## ğŸ“ é¡¹ç›®ç»“æ„

```
game-platform/
â”œâ”€â”€ apps/                      # åº”ç”¨å±‚
â”‚   â”œâ”€â”€ api/                   # API æœåŠ¡ï¼ˆHTTP + é™æ€æ–‡ä»¶ï¼‰
â”‚   â”‚   â”œâ”€â”€ handlers/          # HTTP å¤„ç†å™¨
â”‚   â”‚   â”œâ”€â”€ router/            # è·¯ç”±é…ç½®
â”‚   â”‚   â””â”€â”€ main.go            # å…¥å£æ–‡ä»¶
â”‚   â”œâ”€â”€ game-server/           # æ¸¸æˆæœåŠ¡å™¨ï¼ˆWebSocketï¼‰
â”‚   â”‚   â”œâ”€â”€ adapters/          # é€‚é…å™¨å±‚
â”‚   â”‚   â”œâ”€â”€ core/              # æ ¸å¿ƒé€»è¾‘ï¼ˆHubã€Clientã€Messageï¼‰
â”‚   â”‚   â”œâ”€â”€ handlers/          # WebSocket å¤„ç†å™¨
â”‚   â”‚   â”œâ”€â”€ messaging/         # æ¶ˆæ¯å¤„ç†ï¼ˆKafkaã€å¹¿æ’­ï¼‰
â”‚   â”‚   â”œâ”€â”€ services/          # ä¸šåŠ¡æœåŠ¡ï¼ˆæˆ¿é—´ã€æ¸¸æˆï¼‰
â”‚   â”‚   â””â”€â”€ main.go            # å…¥å£æ–‡ä»¶
â”‚   â””â”€â”€ admin/                 # ç®¡ç†åå° API
â”‚       â”œâ”€â”€ handlers/          # HTTP å¤„ç†å™¨
â”‚       â”œâ”€â”€ middleware/        # ä¸­é—´ä»¶ï¼ˆè®¤è¯ã€æƒé™ã€æ—¥å¿—ï¼‰
â”‚       â”œâ”€â”€ router/            # è·¯ç”±é…ç½®
â”‚       â””â”€â”€ main.go            # å…¥å£æ–‡ä»¶
â”‚
â”œâ”€â”€ admin-vue/                 # ç®¡ç†åå°å‰ç«¯ï¼ˆVue 3ï¼‰
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ views/             # é¡µé¢ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ router/            # è·¯ç”±é…ç½®
â”‚   â”‚   â””â”€â”€ api/               # API å°è£…
â”‚   â””â”€â”€ package.json
â”‚
â”œâ”€â”€ internal/                  # å†…éƒ¨åº“ï¼ˆä¸å¯¹å¤–æš´éœ²ï¼‰
â”‚   â”œâ”€â”€ bootstrap/             # åŸºç¡€è®¾æ–½åˆå§‹åŒ–
â”‚   â”œâ”€â”€ cache/                 # ç¼“å­˜å°è£…ï¼ˆRedisï¼‰
â”‚   â”œâ”€â”€ config/                # é…ç½®ç®¡ç†
â”‚   â”œâ”€â”€ database/              # æ•°æ®åº“è¿æ¥ï¼ˆMySQLï¼‰
â”‚   â”œâ”€â”€ discovery/             # æœåŠ¡å‘ç°ï¼ˆConsulã€Redisï¼‰
â”‚   â”œâ”€â”€ elasticsearch/         # Elasticsearch å®¢æˆ·ç«¯
â”‚   â”œâ”€â”€ lock/                  # é”å®ç°ï¼ˆåˆ†å¸ƒå¼é”ã€æœ¬åœ°é”ï¼‰
â”‚   â”œâ”€â”€ logger/                # æ—¥å¿—å°è£…
â”‚   â”œâ”€â”€ messaging/             # æ¶ˆæ¯æ€»çº¿ï¼ˆKafkaã€Redis Pub/Subï¼‰
â”‚   â”œâ”€â”€ metrics/               # æ€§èƒ½æŒ‡æ ‡æ”¶é›†
â”‚   â”œâ”€â”€ middleware/            # é€šç”¨ä¸­é—´ä»¶
â”‚   â”œâ”€â”€ repository/            # æ•°æ®è®¿é—®å±‚
â”‚   â”œâ”€â”€ service/               # ä¸šåŠ¡æœåŠ¡å±‚
â”‚   â”œâ”€â”€ storage/               # å­˜å‚¨æŠ½è±¡ï¼ˆæ¸¸æˆçŠ¶æ€ï¼‰
â”‚   â””â”€â”€ worker/                # Worker Pool
â”‚
â”œâ”€â”€ pkg/                       # å…±äº«åŒ…ï¼ˆå¯å¯¹å¤–æš´éœ²ï¼‰
â”‚   â”œâ”€â”€ models/                # æ•°æ®æ¨¡å‹
â”‚   â”œâ”€â”€ services/              # å…±äº«æœåŠ¡ï¼ˆæ¸¸æˆå¼•æ“ï¼‰
â”‚   â””â”€â”€ utils/                 # å·¥å…·å‡½æ•°
â”‚
â”œâ”€â”€ configs/                   # é…ç½®æ–‡ä»¶
â”‚   â”œâ”€â”€ config.yaml            # åŸºç¡€é…ç½®
â”‚   â””â”€â”€ config.local.yaml.example  # æœ¬åœ°é…ç½®æ¨¡æ¿
â”‚
â”œâ”€â”€ migrations/                # æ•°æ®åº“è¿ç§»æ–‡ä»¶
â”‚   â”œâ”€â”€ 001_init.sql
â”‚   â”œâ”€â”€ 002_add_password.sql
â”‚   â””â”€â”€ ...
â”‚
â”œâ”€â”€ scripts/                   # å·¥å…·è„šæœ¬
â”‚   â”œâ”€â”€ deploy.sh              # éƒ¨ç½²è„šæœ¬
â”‚   â”œâ”€â”€ install-consul.sh      # Consul å®‰è£…è„šæœ¬
â”‚   â”œâ”€â”€ install-kafka.sh       # Kafka å®‰è£…è„šæœ¬
â”‚   â””â”€â”€ ...
â”‚
â”œâ”€â”€ docker/                    # Docker é…ç½®
â”‚   â”œâ”€â”€ docker-compose.yml     # åŸºç¡€æœåŠ¡ï¼ˆMySQLã€Redisã€ESï¼‰
â”‚   â”œâ”€â”€ docker-compose-consul-kafka.yml  # åˆ†å¸ƒå¼æœåŠ¡
â”‚   â””â”€â”€ ...
â”‚
â”œâ”€â”€ docs/                      # é¡¹ç›®æ–‡æ¡£
â”‚   â”œâ”€â”€ api_overview.md        # API æ¦‚è§ˆ
â”‚   â”œâ”€â”€ admin_guide.md         # ç®¡ç†åå°æŒ‡å—
â”‚   â”œâ”€â”€ database.md            # æ•°æ®åº“è®¾è®¡
â”‚   â”œâ”€â”€ deployment_guide.md    # éƒ¨ç½²æŒ‡å—
â”‚   â”œâ”€â”€ Consulåˆ†å¸ƒå¼åº”ç”¨å®Œæ•´æ–¹æ¡ˆ-Kafkaç‰ˆ.md  # åˆ†å¸ƒå¼æ¶æ„æ–¹æ¡ˆ
â”‚   â””â”€â”€ ...
â”‚
â”œâ”€â”€ web/                       # é™æ€æ–‡ä»¶ï¼ˆç”¨æˆ·ç«¯ï¼‰
â”‚   â”œâ”€â”€ index.html
â”‚   â””â”€â”€ static/
â”‚
â”œâ”€â”€ Makefile                   # æ„å»ºè„šæœ¬
â”œâ”€â”€ go.mod                     # Go æ¨¡å—å®šä¹‰
â””â”€â”€ README.md                  # é¡¹ç›®è¯´æ˜
```

## ğŸ”§ æ„å»ºä¸è¿è¡Œ

### å¼€å‘ç¯å¢ƒè¿è¡Œ

```bash
# è¿è¡Œ API æœåŠ¡
make run-api

# è¿è¡Œæ¸¸æˆæœåŠ¡å™¨
make run-game

# è¿è¡Œç®¡ç†åå°
make run-admin
```

### æ„å»ºäºŒè¿›åˆ¶æ–‡ä»¶

```bash
# æ„å»ºå½“å‰å¹³å°
make build

# æ„å»º Linux ç‰ˆæœ¬
make build-linux

# æ„å»º Linux ARM64 ç‰ˆæœ¬
make build-linux-arm64

# æ„å»º Windows ç‰ˆæœ¬
make build-windows

# æ„å»º macOS ç‰ˆæœ¬
make build-darwin

# æ„å»º macOS ARM64 ç‰ˆæœ¬ï¼ˆApple Siliconï¼‰
make build-darwin-arm64

# æ„å»ºæ‰€æœ‰å¹³å°
make build-all
```

### æ•°æ®åº“è¿ç§»

```bash
# æ‰§è¡Œè¿ç§»
make migrate

# æŸ¥çœ‹è¿ç§»çŠ¶æ€
# ï¼ˆéœ€è¦æŸ¥çœ‹æ•°æ®åº“ä¸­çš„ migrations è¡¨ï¼‰
```

### ä»£ç æ£€æŸ¥

```bash
# æ ¼å¼åŒ–ä»£ç 
make fmt

# ä»£ç æ£€æŸ¥
make vet

# è¿è¡Œæµ‹è¯•
make test
```

### æ¸…ç†

```bash
# æ¸…ç†æ„å»ºäº§ç‰©
make clean
```

## ğŸŒ åˆ†å¸ƒå¼éƒ¨ç½²

é¡¹ç›®æ”¯æŒå¤šå®ä¾‹åˆ†å¸ƒå¼éƒ¨ç½²ï¼Œä½¿ç”¨ Consul è¿›è¡ŒæœåŠ¡å‘ç°ï¼ŒKafka è¿›è¡Œè·¨å®ä¾‹æ¶ˆæ¯ä¼ é€’ã€‚

### æ¶æ„ç‰¹ç‚¹

- **æœåŠ¡å‘ç°**ï¼šConsul è‡ªåŠ¨æ³¨å†Œå’Œå‘ç°æœåŠ¡å®ä¾‹
- **å¥åº·æ£€æŸ¥**ï¼šè‡ªåŠ¨æ£€æµ‹æ•…éšœå®ä¾‹å¹¶ç§»é™¤
- **è·¨å®ä¾‹é€šä¿¡**ï¼šKafka æ¶ˆæ¯é˜Ÿåˆ—å®ç°å®ä¾‹é—´æ¶ˆæ¯ä¼ é€’
- **è´Ÿè½½å‡è¡¡**ï¼šNginx åŸºäºæœåŠ¡å‘ç°è¿›è¡Œè´Ÿè½½å‡è¡¡

### å¿«é€Ÿéƒ¨ç½²

è¯¦ç»†éƒ¨ç½²æ–‡æ¡£è¯·å‚è€ƒï¼š
- [Consul + Kafka äºŒè¿›åˆ¶éƒ¨ç½²æŒ‡å—](docs/consul_kafka_binary_deployment.md)
- [Consul åˆ†å¸ƒå¼åº”ç”¨å®Œæ•´æ–¹æ¡ˆï¼ˆKafka ç‰ˆï¼‰](docs/Consulåˆ†å¸ƒå¼åº”ç”¨å®Œæ•´æ–¹æ¡ˆ-Kafkaç‰ˆ.md)

### åŸºæœ¬æ­¥éª¤

1. **éƒ¨ç½² Consul å’Œ Kafka**
   ```bash
   # ä½¿ç”¨æä¾›çš„è„šæœ¬
   ./scripts/install-consul.sh
   ./scripts/install-kafka.sh
   ```

2. **é…ç½®æœåŠ¡å‘ç°å’Œæ¶ˆæ¯é˜Ÿåˆ—**
   ```yaml
   service_discovery:
     enabled: true
     type: "consul"
     consul_addr: "consul.example.com:8500"
   
   kafka:
     enabled: true
     brokers:
       - "kafka.example.com:9092"
   ```

3. **å¯åŠ¨å¤šä¸ªå®ä¾‹**
   ```bash
   # å®ä¾‹1
   SERVER_MACHINE_ID=0 ./bin/game-server-linux-arm64
   
   # å®ä¾‹2
   SERVER_MACHINE_ID=1 ./bin/game-server-linux-arm64
   
   # å®ä¾‹3
   SERVER_MACHINE_ID=2 ./bin/game-server-linux-arm64
   ```

## ğŸ“š æ–‡æ¡£

### æ ¸å¿ƒæ–‡æ¡£

- [API æ¦‚è§ˆ](docs/api_overview.md) - API æ¥å£è¯´æ˜
- [ç®¡ç†åå°æŒ‡å—](docs/admin_guide.md) - ç®¡ç†åå°ä½¿ç”¨è¯´æ˜
- [æ•°æ®åº“è®¾è®¡](docs/database.md) - æ•°æ®åº“è¡¨ç»“æ„è¯´æ˜
- [éƒ¨ç½²æŒ‡å—](docs/deployment_guide.md) - éƒ¨ç½²ç›¸å…³æ–‡æ¡£

### æ¶æ„æ–‡æ¡£

- [æ¶æ„æ¦‚å¿µ](docs/architecture_concepts.md) - æ¶æ„è®¾è®¡ç†å¿µ
- [åˆ†å¸ƒå¼æ¶æ„æ–¹æ¡ˆ](docs/distributed_architecture.md) - åˆ†å¸ƒå¼æ¶æ„æ¦‚è¿°
- [Consul åˆ†å¸ƒå¼åº”ç”¨å®Œæ•´æ–¹æ¡ˆï¼ˆKafka ç‰ˆï¼‰](docs/Consulåˆ†å¸ƒå¼åº”ç”¨å®Œæ•´æ–¹æ¡ˆ-Kafkaç‰ˆ.md) - è¯¦ç»†åˆ†å¸ƒå¼æ–¹æ¡ˆ
- [Consul æœåŠ¡å‘ç°åŸç†ä¸å®ç°](docs/ConsulæœåŠ¡å‘ç°åŸç†ä¸å®ç°.md) - Consul ä½¿ç”¨è¯´æ˜
- [Redis æœåŠ¡å‘ç°åŸç†ä¸å®ç°](docs/RedisæœåŠ¡å‘ç°åŸç†ä¸å®ç°.md) - Redis æœåŠ¡å‘ç°è¯´æ˜

### éƒ¨ç½²æ–‡æ¡£

- [Consul + Kafka äºŒè¿›åˆ¶éƒ¨ç½²](docs/consul_kafka_binary_deployment.md) - äºŒè¿›åˆ¶éƒ¨ç½²æŒ‡å—
- [è´Ÿè½½å‡è¡¡æ”¹é€ æ–¹æ¡ˆ](docs/load_balancing_guide.md) - è´Ÿè½½å‡è¡¡é…ç½®
- [ç½‘ç»œæ•…éšœæ’æŸ¥](docs/network_troubleshooting.md) - ç½‘ç»œé—®é¢˜æ’æŸ¥

### å¼€å‘æ–‡æ¡£

- [Game Server é‡æ„è®¡åˆ’](docs/game-server-refactoring-plan.md) - ä»£ç é‡æ„è¯´æ˜
- [è·¨å®ä¾‹æ¶ˆæ¯æµ‹è¯•](docs/cross_instance_message_testing.md) - è·¨å®ä¾‹é€šä¿¡æµ‹è¯•

## ğŸ” å®‰å…¨è¯´æ˜

### ç”Ÿäº§ç¯å¢ƒé…ç½®

1. **ä¿®æ”¹ JWT Secret**
   ```yaml
   jwt:
     secret: "your-strong-random-secret-key"
   ```

2. **é…ç½®æ•°æ®åº“å¯†ç **
   ```yaml
   database:
     password: "strong-password"
   ```

3. **é…ç½® Redis å¯†ç **
   ```yaml
   redis:
     password: "redis-password"
   ```

4. **é…ç½®æ”¯ä»˜åŠ©è®°è¯**
   ```yaml
   payment:
     master_mnemonic: "your-12-or-24-word-mnemonic"
   ```
   âš ï¸ **è­¦å‘Š**ï¼šç”Ÿäº§ç¯å¢ƒè¯·ä½¿ç”¨ç¯å¢ƒå˜é‡æˆ–å¯†é’¥ç®¡ç†æœåŠ¡ï¼Œä¸è¦ç›´æ¥å†™åœ¨é…ç½®æ–‡ä»¶ä¸­ã€‚

5. **å¯ç”¨ HTTPS**
   - é…ç½® Nginx SSL è¯ä¹¦
   - å¯ç”¨ WSSï¼ˆWebSocket Secureï¼‰

## ğŸ¤ è´¡çŒ®æŒ‡å—

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

### è´¡çŒ®æµç¨‹

1. Fork æœ¬ä»“åº“
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. å¼€å¯ Pull Request

### ä»£ç è§„èŒƒ

- éµå¾ª Go å®˜æ–¹ä»£ç è§„èŒƒ
- ä½¿ç”¨ `make fmt` æ ¼å¼åŒ–ä»£ç 
- ä½¿ç”¨ `make vet` æ£€æŸ¥ä»£ç 
- ç¼–å†™å•å…ƒæµ‹è¯•

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ã€‚è¯¦æƒ…è¯·å‚é˜… [LICENSE](LICENSE) æ–‡ä»¶ã€‚

## ğŸ“ è”ç³»æ–¹å¼

- **Issues**ï¼š[GitHub Issues](https://github.com/kaifa/game-platform/issues)
- **Pull Requests**ï¼š[GitHub Pull Requests](https://github.com/kaifa/game-platform/pulls)

## ğŸ™ è‡´è°¢

æ„Ÿè°¢æ‰€æœ‰ä¸ºæœ¬é¡¹ç›®åšå‡ºè´¡çŒ®çš„å¼€å‘è€…ï¼

---

**æ³¨æ„**ï¼šæœ¬é¡¹ç›®ä»åœ¨ç§¯æå¼€å‘ä¸­ï¼ŒAPI å’Œé…ç½®å¯èƒ½ä¼šå‘ç”Ÿå˜åŒ–ã€‚å»ºè®®åœ¨ç”Ÿäº§ç¯å¢ƒä½¿ç”¨å‰ä»”ç»†æµ‹è¯•ã€‚
