# 前端使用指南

## 🎮 快速开始

### 1. 启动服务

确保API服务和游戏服务器都在运行：

```bash
# 终端1 - API服务
make run-api

# 终端2 - 游戏服务器
make run-game
```

### 2. 访问前端

打开浏览器访问：`http://localhost:8080`

## 📱 功能说明

### 登录/注册
- **登录**：输入手机号和密码
- **注册**：输入手机号、密码（至少6位）、昵称

### 游戏大厅
- **房间列表**：显示所有可用房间
- **游戏筛选**：可按游戏类型筛选房间
- **创建房间**：可设置游戏类型、房间类型、底注、人数、密码（可选）
- **加入房间**：点击房间卡片加入，有密码的房间会提示输入密码

### 游戏房间
- **玩家列表**：显示房间内所有玩家及准备状态
- **准备/取消准备**：点击准备按钮
- **开始游戏**：房主可以在所有玩家准备后开始游戏

### 游戏界面
- **手牌显示**：显示你的手牌（其他玩家只显示牌数）
- **出牌**：点击手牌选择要出的牌，再点击"出牌"按钮
- **过牌**：点击"过"按钮跳过本轮
- **倒计时**：显示当前玩家的出牌倒计时
- **游戏状态**：显示当前回合、上次出的牌等信息

### 排行榜
- **查看排行榜**：可选择游戏类型和周期（总榜/日榜/周榜/月榜）
- **我的排名**：登录后自动显示你的排名

### 我的记录
- **游戏记录**：查看你参与的所有游戏记录
- **记录详情**：查看每局游戏的详细信息

## 🔧 技术说明

### 文件结构
```
web/
├── index.html          # 主页面（单页应用）
├── static/
│   ├── css/
│   │   └── style.css  # 样式文件
│   └── js/
│       ├── api.js     # API封装
│       ├── websocket.js # WebSocket管理
│       ├── game.js    # 游戏工具函数
│       └── app.js     # 主应用逻辑
└── README.md          # 使用说明
```

### API接口
- 所有API请求通过 `/api/v1` 路径访问
- 需要认证的接口会自动携带 `Authorization: Bearer {token}` 头部
- Token存储在 `localStorage` 中

### WebSocket连接
- WebSocket服务地址：`ws://localhost:8081/ws`
- 连接时自动携带token进行认证
- 支持自动重连机制

### 游戏流程
1. 注册/登录账号
2. 进入游戏大厅
3. 创建或加入房间
4. 玩家准备
5. 房主开始游戏
6. 游戏进行（出牌/过牌）
7. 游戏结束（查看结算）

## 🐛 常见问题

### 1. 页面无法加载
- 检查API服务是否启动（端口8080）
- 检查浏览器控制台是否有错误

### 2. WebSocket连接失败
- 检查游戏服务器是否启动（端口8081）
- 检查token是否有效（可能需要重新登录）

### 3. 无法创建/加入房间
- 检查是否已登录
- 检查房间是否已满
- 检查密码是否正确

### 4. 游戏状态不更新
- 检查WebSocket连接是否正常
- 刷新页面重新加载游戏状态

## 📝 注意事项

1. **Token过期**：Token过期后需要重新登录
2. **刷新页面**：刷新页面会断开WebSocket连接，需要重新连接
3. **多标签页**：多个标签页使用同一账号会有冲突，建议只开一个标签页
4. **浏览器兼容性**：建议使用Chrome、Firefox、Safari等现代浏览器


